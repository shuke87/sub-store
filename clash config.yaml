mixed-port: 7890
allow-lan: true
mode: rule
log-level: warn  # é™ä½æ—¥å¿—çº§åˆ«ï¼Œå‡å°‘èµ„æºå ç”¨
ipv6: true
external-controller: :9090
unified-delay: true
tcp-concurrent: true
use-hosts: true
cache: true
cache-algorithm: arc

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
  - "+.lan"
  - "+.local"
  - "+.msftconnecttest.com"
  - "+.msftncsi.com"
  - "+localhost.ptlogin2.qq.com"
  - "+localhost.sec.qq.com"
  - "+localhost.work.weixin.qq.com"
  default-nameserver:
  - 223.5.5.5
  - 119.29.29.29
  - 8.8.8.8
  nameserver:
  - https://223.5.5.5/dns-query
  - https://1.12.12.12/dns-query
  - https://8.8.8.8/dns-query
  fallback:
  - https://1.1.1.1/dns-query
  - https://1.0.0.1/dns-query
  - https://doh.opendns.com/dns-query
  fallback-filter:  # å¯ç”¨DNSåˆ†æµï¼Œå›½å†…åŸŸåèµ°å›½å†…DNS
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32

p: &p
  type: http
  interval: 3600
  health-check:  # å¢å¼ºå¥åº·æ£€æŸ¥ï¼Œè¿‡æ»¤æ— æ•ˆèŠ‚ç‚¹
    enable: true
    url: https://www.gstatic.com/generate_204
    interval: 300
    timeout: 5000
    tolerance: 2
    
proxy-providers:
  provider1:
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/yudou66.txt"
    path: "./Proxy/provider1.yaml"
    <<: *p
    override:
      additional-prefix: "ã€ğŸ¶ã€‘"
  provider2:
    url: "https://raw.githubusercontent.com/ripaojiedian/freenode/main/sub"
    path: "./Proxy/provider2.yaml"
    <<: *p
    override:
      additional-prefix: "ã€ç¤¾ã€‘"
  provider3:
    url: "https://raw.githubusercontent.com/XQFXS/mfjd/refs/heads/main/%E5%B0%8F%E4%B8%83%E5%88%86%E4%BA%AB%E7%A4%BE%E8%8A%82%E7%82%B9%E5%88%86%E4%BA%AB"
    path: "./Proxy/provider3.yaml"
    <<: *p
    override:
      additional-prefix: "ã€ç™½å«–ã€‘"    
      
proxies:
  - name: ğŸŒ ç›´è¿
    type: direct

u: &u
  use:
  - provider1
  - provider2
  - provider3
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    <<: *u
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter:  # è¿‡æ»¤é«˜å»¶è¿ŸèŠ‚ç‚¹
      max-delay: 300
    <<: *u
  - name: ğŸ“½ å›½å¤–åª’ä½“
    type: select
    proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]
    <<: *u
  - name: ğŸ“² Telegram
    type: select
    proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]
    <<: *u
  - name: ğŸ’¬ ChatAi
    type: select
    proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]
    <<: *u
  - name: ğŸ›¡ ç½‘ç»œå‡€åŒ–
    type: select
    proxies: [REJECT, ğŸŒ ç›´è¿]
  - name: ğŸŒ å…¨çƒç›´è¿
    type: select
    proxies: [ğŸŒ ç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]
  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸŒ ç›´è¿]

c: &c
  type: http
  behavior: classical
  format: text
  interval: 86400
ym: &ym
  type: http
  behavior: domain
  format: yaml
  interval: 86400
ip: &ip
  type: http
  behavior: ipcidr
  format: yaml
  interval: 86400

rule-providers:
  GoogleCNProxyIP:
    <<: *c
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCNProxyIP.list
    path: ./rule/GoogleCNProxyIP.txt
  LANIP:
    <<: *c
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
    path: ./rule/LANIP.txt
  BanEasyPrivacy:
    <<: *c
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list
    path: ./rule/BanEasyPrivacy.txt
  OpenAi:  # åˆå¹¶ChatBotåŠŸèƒ½ï¼Œç²¾ç®€è§„åˆ™é›†
    <<: *c
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAi.list
    path: ./rule/OpenAi.txt
  ProxyMedia:
    <<: *c
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/ProxyMedia.list
    path: ./rule/ProxyMedia.txt
  Download:
    <<: *c
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Download.list
    path: ./rule/Download.txt
  Telegram:
    <<: *ip
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/telegramcidr.txt
    path: ./rule/Telegram.txt
  ChinaIp:
    <<: *ip
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/cncidr.txt
    path: ./rule/ChinaIp.txt
  Proxy:
    <<: *ym
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt
    path: ./rule/Proxy.txt
  GFWList:
    <<: *ym
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt
    path: ./rule/GFWList.txt
  direct:
    <<: *ym
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt
    path: ./rule/direct.txt
  LoyalsGG:
    <<: *ym
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt
    path: ./rule/LoyalsGG.txt
  AppGG:
    <<: *ym
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Advertising.list
    path: ./rule/AppGG.txt
  
rules:
  - DOMAIN-SUFFIX,googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,gstatic.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,GoogleCNProxyIP,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,LANIP,ğŸŒ å…¨çƒç›´è¿
  - RULE-SET,LoyalsGG,ğŸ›¡ ç½‘ç»œå‡€åŒ–
  - RULE-SET,AppGG,ğŸ›¡ ç½‘ç»œå‡€åŒ–
  - RULE-SET,BanEasyPrivacy,ğŸ›¡ ç½‘ç»œå‡€åŒ–
  - RULE-SET,Telegram,ğŸ“² Telegram,no-resolve
  - RULE-SET,OpenAi,ğŸ’¬ ChatAi  # ç§»é™¤é‡å¤çš„ChatBotè§„åˆ™
  - RULE-SET,ProxyMedia,ğŸ“½ å›½å¤–åª’ä½“
  - RULE-SET,Proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,GFWList,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,ğŸŒ å…¨çƒç›´è¿
  - RULE-SET,ChinaIp,ğŸŒ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,Download,ğŸŒ å…¨çƒç›´è¿
  - GEOIP,LAN,ğŸŒ å…¨çƒç›´è¿,no-resolve
  - GEOIP,CN,ğŸŒ å…¨çƒç›´è¿,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
